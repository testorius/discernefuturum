---
import Layout from '../layouts/Layout.astro';
import Hero from '../components/Hero.astro';
import ServicesGrid from '../components/ServicesGrid.astro';
import { getEntry } from 'astro:content';

// Add debug logging for the entire process
console.log('=== DEBUG: Page Load Start ===');

const homepage = await getEntry('home', 'homepage');
console.log('Homepage Entry:', homepage);

const { hero, seo, services } = homepage?.data || {};
console.log('Destructured Data:', { hero, seo, servicesLength: services?.length });

// Ensure services is an array
const safeServices = Array.isArray(services) ? services : [];
console.log('Safe Services:', safeServices);
---

<Layout 
  title={seo?.title || 'Default Title'}
  description={seo?.description || 'Default Description'}
  siteName={seo?.siteName || 'Default Site Name'}
>
  <Hero
    uptitle={hero?.uptitle || ''}
    title={hero?.title || ''}
    subtitle={hero?.subtitle || ''}
    valueProps={hero?.valueProps || []}
  />
  
  <!-- Add debug comment -->
  <!-- Services Count: {safeServices.length} -->
  <ServicesGrid services={safeServices} />
</Layout>
